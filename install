#!/bin/sh -e

DIR=`pwd`/`dirname $0`

# XSession script
sudo install default.desktop /usr/share/xsessions

# XMonad
sudo apt-get -y install cabal-install xmonad \
	libghc-gconf-dev libghc-missingh-dev

[ -d ~/.cabal ] || cabal update

mkdir -p ~/.xmonad
ln -sf $DIR/xmonad.hs ~/.xmonad

# Taffybar
sudo apt-get -y install gtk2hs-buildtools libghc-cairo-dev libghc-gtk-dev \
	libgtk-3-dev libxml2-dev imagemagick feh

cabal install current-locale taffybar

sudo apt-get -y install light-themes

ln -sf $DIR/taffybar ~/.config

# Synapse
sudo apt-get -y install synapse zeitgeist-extension-fts
ln -sf $DIR/synapse ~/.config

# IBus
sudo apt-get -y install ibus ibus-pinyin ibus-table ibus-m17n

# Session script
sudo apt-get -y install notify-osd

ln -sf $DIR/.xsession ~
ln -sf $DIR/.xmodmaprc ~

sudo apt-get -y autoremove
